{% extends 'admin_base.html' %}
{% load humanize %}
{% block content %}
<div class="container mt-3">
     <!-- Back Button -->
     {% if show_back_button %}
     <a href="{% url 'admin_App:members' %}" class="btn back-button" style="background-color: #D6A2AD">
         <i class="fas fa-arrow-left"></i> Back
     </a>
     {% endif %}
    <h2 class="text-center">Manage {{ display_name }}'s Account</h2>
    <div class="row mt-5 d-flex align-items-stretch">
        <div class="col-md-3 mb-4 d-flex">
            <div class="card text-center border-0 shadow flex-fill d-flex flex-column">
                <div class="card-body flex-grow-1 d-flex flex-column">
                    <h5 class="card-title">Mtaji</h5>
                    <p class="card-text"> <br>{{ total_mtaji|floatformat:0|intcomma }} Tsh</p>
                    <a href="{% url 'admin_App:manage_mtaji' managed_user.id %}" class="btn mt-auto" style="background-color: #D6A2AD;"><h6>Manage Mtaji</h6></a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4 d-flex">
            <div class="card text-center border-0 shadow flex-fill d-flex flex-column">
                <div class="card-body flex-grow-1 d-flex flex-column">
                    <h5 class="card-title">Michango ya Kila Mwezi</h5>
                    <p class="card-text">{{ total_mchango|floatformat:0|intcomma }} Tsh</p>
                    <a href="{% url 'admin_App:manage_mchango' managed_user.id %}" class="btn mt-auto" style="background-color: #D6A2AD;">Manage Mchango</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4 d-flex">
            <div class="card text-center border-0 shadow flex-fill d-flex flex-column">
                <div class="card-body flex-grow-1 d-flex flex-column">
                    <h5 class="card-title">Swadaqa</h5>
                    <p class="card-text"><br>{{ total_swadaqa|floatformat:0|intcomma }} Tsh</p>
                    <a href="{% url 'admin_App:manage_swadaqa' managed_user.id %}" class="btn mt-auto" style="background-color: #D6A2AD;">Manage Swadaqa</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4 d-flex">
            <div class="card text-center border-0 shadow flex-fill d-flex flex-column">
                <div class="card-body flex-grow-1 d-flex flex-column">
                    <h5 class="card-title">Mkopo</h5>
                    <p class="card-text">Manage loans for {{ display_name }}.</p>
                    <a href="{% url 'admin_App:manage_mkopo' managed_user.id %}" class="btn mt-auto" style="background-color: #D6A2AD;">Manage Mkopo</a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-4 d-flex">
            <div class="card text-center border-0 shadow flex-fill d-flex flex-column">
                <div class="card-body flex-grow-1 d-flex flex-column">
                    <h5 class="card-title">View Payments Image</h5>
                    <p class="card-text">View payment screenshots uploaded by {{ display_name }}.</p>
                    <a href="{% url 'admin_App:view_payment_images' managed_user.id %}" class="btn mt-auto" style="background-color: #D6A2AD;">View Payments</a>
                </div>
            </div>
        </div>
    </div>

    <!--buttons for viewing details and deleting account -->
    <div class="row mt-4">
        <div class="col-12 d-flex justify-content-end">
            <a href="{% url 'admin_App:view_member_details' managed_user.id %}" class="btn mr-2" style="background-color: #D6A2AD;">View {{ display_name }}'s Details</a>
            <form action="{% url 'admin_App:delete_member_account' managed_user.id %}" method="POST" onsubmit="return confirm('Are you sure you want to delete {{ managed_user.username }}\'s account?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Delete {{ display_name }}'s Account</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}